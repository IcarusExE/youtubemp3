<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ config.APP_NAME }}</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.2);
        }
        .gradient-text {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .loading-spinner {
            display: none;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .card-shadow {
            box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        .hover-scale {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .hover-scale:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.1);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -2px;
            left: 0;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 100%;
        }
        .feature-icon {
            transition: all 0.3s ease;
        }
        .feature-card:hover .feature-icon {
            transform: scale(1.1);
        }
        .step-number {
            transition: all 0.3s ease;
        }
        .step-card:hover .step-number {
            transform: scale(1.1);
        }
        .social-link {
            transition: all 0.3s ease;
        }
        .social-link:hover {
            transform: translateY(-3px);
            color: #3b82f6;
        }
        .input-focus {
            transition: all 0.3s ease;
        }
        .input-focus:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Navbar -->
    <nav class="glass-effect sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i class="fa-brands fa-youtube text-red-500 text-2xl mr-2"></i>
                        <span class="font-bold text-xl gradient-text">{{ config.NAVBAR_TITLE }}</span>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                        <a href="#" class="nav-link text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium">
                            {{ config.NAVBAR_MENU_HOME }}
                        </a>
                        <a href="#features" class="nav-link text-gray-500 hover:text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium">
                            {{ config.NAVBAR_MENU_FEATURES }}
                        </a>
                        <a href="#how-it-works" class="nav-link text-gray-500 hover:text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium">
                            {{ config.NAVBAR_MENU_HOW_IT_WORKS }}
                        </a>
                    </div>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:items-center">
                    <a href="#" class="bg-white p-2 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none hover:bg-gray-50 transition-all duration-300">
                        <i class="fa-solid fa-gear"></i>
                    </a>
                </div>
                <div class="-mr-2 flex items-center sm:hidden">
                    <button type="button" class="bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-50 focus:outline-none transition-all duration-300" id="mobileMenuButton">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="sm:hidden hidden" id="mobileMenu">
            <div class="pt-2 pb-3 space-y-1">
                <a href="#" class="bg-blue-50 border-blue-500 text-blue-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">
                    {{ config.NAVBAR_MENU_HOME }}
                </a>
                <a href="#features" class="border-transparent text-gray-600 hover:bg-gray-50 hover:border-blue-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">
                    {{ config.NAVBAR_MENU_FEATURES }}
                </a>
                <a href="#how-it-works" class="border-transparent text-gray-600 hover:bg-gray-50 hover:border-blue-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">
                    {{ config.NAVBAR_MENU_HOW_IT_WORKS }}
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow py-12">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Hero Section -->
            <div class="text-center mb-16">
                <h1 class="text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl">
                    <span class="block">{{ config.HERO_TITLE }}</span>
                    <span class="block gradient-text mt-1">{{ config.HERO_SUBTITLE }}</span>
                </h1>
                <p class="mt-3 max-w-md mx-auto text-base text-gray-600 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">
                    {{ config.HERO_DESCRIPTION }}
                </p>
            </div>

            <!-- Converter Card -->
            <div class="bg-white rounded-2xl card-shadow overflow-hidden transition-all duration-300 hover-scale mb-16">
                <!-- Form -->
                <div class="p-8 sm:p-10">
                    <form id="convertForm" class="space-y-6">
                        <div>
                            <label for="video_url" class="block text-sm font-medium text-gray-700 mb-2">{{ config.CONVERTER_LABEL }}</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fa-brands fa-youtube text-red-500"></i>
                                </div>
                                <input type="url" id="video_url" name="video_url" required placeholder="{{ config.CONVERTER_PLACEHOLDER }}" class="pl-10 block w-full rounded-lg border-gray-300 border p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm transition-all duration-200 input-focus">
                            </div>
                        </div>
                        
                        <button type="submit" class="w-full gradient-bg text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-300">
                            <span id="buttonText">{{ config.CONVERTER_BUTTON }}</span>
                            <i id="loadingSpinner" class="fa-solid fa-circle-notch ml-2 loading-spinner"></i>
                        </button>
                    </form>
                    
                    <!-- Sonuç -->
                    <div id="result" class="mt-8 hidden">
                        <div id="successResult" class="hidden">
                            <div class="bg-green-50 p-4 rounded-lg border border-green-200 mb-4">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <i class="fa-solid fa-check-circle text-green-500 text-xl"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h3 class="text-sm font-medium text-green-800">{{ config.CONVERTER_SUCCESS }}</h3>
                                        <div class="mt-2 text-sm text-green-700">
                                            <p>{{ config.CONVERTER_SUCCESS_DESC }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a id="downloadLink" href="#" target="_blank" class="w-full gradient-bg text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-300" download>
                                <i class="fa-solid fa-download mr-2"></i>
                                {{ config.CONVERTER_DOWNLOAD_BUTTON }}
                            </a>
                        </div>
                        
                        <div id="errorResult" class="hidden">
                            <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <i class="fa-solid fa-exclamation-circle text-red-500 text-xl"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h3 class="text-sm font-medium text-red-800">Hata!</h3>
                                        <div class="mt-2 text-sm text-red-700">
                                            <p id="errorMessage">Bir sorun oluştu. Lütfen tekrar deneyin.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features Section -->
            <div id="features" class="py-8">
                <h2 class="text-3xl font-bold text-center text-gray-900 mb-12">{{ config.FEATURES_TITLE }}</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white p-6 rounded-xl card-shadow hover-scale feature-card">
                        <div class="h-12 w-12 rounded-md gradient-bg flex items-center justify-center mb-4 feature-icon">
                            <i class="fa-solid fa-bolt text-white text-xl"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900">{{ config.FEATURE1_TITLE }}</h3>
                        <p class="mt-2 text-base text-gray-600">
                            {{ config.FEATURE1_DESCRIPTION }}
                        </p>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl card-shadow hover-scale feature-card">
                        <div class="h-12 w-12 rounded-md gradient-bg flex items-center justify-center mb-4 feature-icon">
                            <i class="fa-solid fa-lock text-white text-xl"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900">{{ config.FEATURE2_TITLE }}</h3>
                        <p class="mt-2 text-base text-gray-600">
                            {{ config.FEATURE2_DESCRIPTION }}
                        </p>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl card-shadow hover-scale feature-card">
                        <div class="h-12 w-12 rounded-md gradient-bg flex items-center justify-center mb-4 feature-icon">
                            <i class="fa-solid fa-music text-white text-xl"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900">{{ config.FEATURE3_TITLE }}</h3>
                        <p class="mt-2 text-base text-gray-600">
                            {{ config.FEATURE3_DESCRIPTION }}
                        </p>
                    </div>
                </div>
            </div>

            <!-- How It Works Section -->
            <div id="how-it-works" class="py-8">
                <h2 class="text-3xl font-bold text-center text-gray-900 mb-12">{{ config.HOW_IT_WORKS_TITLE }}</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="flex flex-col items-center text-center step-card">
                        <div class="h-16 w-16 rounded-full gradient-bg flex items-center justify-center mb-4 step-number">
                            <span class="text-white font-bold text-xl">1</span>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900">{{ config.HOW_STEP1_TITLE }}</h3>
                        <p class="mt-2 text-base text-gray-600">
                            {{ config.HOW_STEP1_DESCRIPTION }}
                        </p>
                    </div>
                    
                    <div class="flex flex-col items-center text-center step-card">
                        <div class="h-16 w-16 rounded-full gradient-bg flex items-center justify-center mb-4 step-number">
                            <span class="text-white font-bold text-xl">2</span>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900">{{ config.HOW_STEP2_TITLE }}</h3>
                        <p class="mt-2 text-base text-gray-600">
                            {{ config.HOW_STEP2_DESCRIPTION }}
                        </p>
                    </div>
                    
                    <div class="flex flex-col items-center text-center step-card">
                        <div class="h-16 w-16 rounded-full gradient-bg flex items-center justify-center mb-4 step-number">
                            <span class="text-white font-bold text-xl">3</span>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900">{{ config.HOW_STEP3_TITLE }}</h3>
                        <p class="mt-2 text-base text-gray-600">
                            {{ config.HOW_STEP3_DESCRIPTION }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center">
                        <i class="fa-brands fa-youtube text-red-500 text-2xl mr-2"></i>
                        <span class="font-bold text-xl gradient-text">{{ config.APP_NAME }}</span>
                    </div>
                    <p class="mt-4 text-base text-gray-600">
                        {{ config.FOOTER_DESCRIPTION }}
                    </p>
                    <div class="mt-4 flex space-x-6">
                        <a href="#" class="social-link text-gray-400 hover:text-blue-500">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="#" class="social-link text-gray-400 hover:text-blue-500">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="#" class="social-link text-gray-400 hover:text-blue-500">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="social-link text-gray-400 hover:text-blue-500">
                            <i class="fab fa-github text-xl"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">{{ config.FOOTER_LINKS_TITLE }}</h3>
                    <ul class="mt-4 space-y-4">
                        <li>
                            <a href="#" class="text-base text-gray-600 hover:text-blue-500 transition-colors duration-300">
                                {{ config.FOOTER_LINKS_HOME }}
                            </a>
                        </li>
                        <li>
                            <a href="#features" class="text-base text-gray-600 hover:text-blue-500 transition-colors duration-300">
                                {{ config.FOOTER_LINKS_FEATURES }}
                            </a>
                        </li>
                        <li>
                            <a href="#how-it-works" class="text-base text-gray-600 hover:text-blue-500 transition-colors duration-300">
                                {{ config.FOOTER_LINKS_HOW_IT_WORKS }}
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">{{ config.FOOTER_LEGAL_TITLE }}</h3>
                    <ul class="mt-4 space-y-4">
                        <li>
                            <a href="#" class="text-base text-gray-600 hover:text-blue-500 transition-colors duration-300">
                                {{ config.FOOTER_LEGAL_PRIVACY }}
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-base text-gray-600 hover:text-blue-500 transition-colors duration-300">
                                {{ config.FOOTER_LEGAL_TERMS }}
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-base text-gray-600 hover:text-blue-500 transition-colors duration-300">
                                {{ config.FOOTER_LEGAL_DMCA }}
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-200 pt-8">
                <p class="text-base text-gray-400 text-center">
                    {{ config.FOOTER_COPYRIGHT|safe }}
                </p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobileMenuButton');
            const mobileMenu = document.getElementById('mobileMenu');
            
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Smooth scroll for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80, // Adjust for navbar height
                            behavior: 'smooth'
                        });
                        
                        // Close mobile menu if open
                        if (!mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden');
                        }
                    }
                });
            });
        
            // Form submission
            const form = document.getElementById('convertForm');
            const result = document.getElementById('result');
            const successResult = document.getElementById('successResult');
            const errorResult = document.getElementById('errorResult');
            const errorMessage = document.getElementById('errorMessage');
            const downloadLink = document.getElementById('downloadLink');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const buttonText = document.getElementById('buttonText');
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Form verilerini al
                const formData = new FormData(form);
                const videoUrl = formData.get('video_url');
                
                if (!videoUrl) {
                    showError('Lütfen geçerli bir YouTube URL\'si girin.');
                    return;
                }
                
                // Yükleniyor durumunu göster
                loadingSpinner.style.display = 'inline-block';
                buttonText.textContent = '{{ config.CONVERTER_LOADING }}';
                
                // Form ve sonuçları sıfırla
                result.classList.add('hidden');
                successResult.classList.add('hidden');
                errorResult.classList.add('hidden');
                
                // API'ye istek gönder
                fetch('/convert', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    // Yükleniyor durumunu gizle
                    loadingSpinner.style.display = 'none';
                    buttonText.textContent = '{{ config.CONVERTER_BUTTON }}';
                    
                    // Sonuç alanını göster
                    result.classList.remove('hidden');
                    
                    // Başarı veya hata durumunu göster
                    if (data.success && data.download_url) {
                        successResult.classList.remove('hidden');
                        errorResult.classList.add('hidden');
                        
                        // İndirme bağlantısını düzgün şekilde ayarla
                        const downloadUrl = data.download_url;
                        const filename = data.filename || 'youtube_mp3.mp3';
                        
                        // Proxy üzerinden indirme bağlantısı oluştur
                        // Bu Flask'taki /download/<url> rotasını kullanır
                        const proxyDownloadUrl = '/download/' + encodeURIComponent(downloadUrl);
                        
                        // İndirme bağlantısını ayarla
                        downloadLink.href = downloadUrl;
                        downloadLink.setAttribute('download', filename);
                        
                        // İndirme butonuna tıklandığında
                        downloadLink.onclick = function(e) {
                            e.preventDefault();
                            
                            // Yeni sekme aç
                            const newTab = window.open(downloadUrl, '_blank');
                            
                            // Yeni sekme açılamazsa (popup engellendi)
                            if (!newTab || newTab.closed || typeof newTab.closed == 'undefined') {
                                // Doğrudan indirmeyi dene
                                const tempLink = document.createElement('a');
                                tempLink.href = downloadUrl;
                                tempLink.setAttribute('download', filename);
                                tempLink.setAttribute('target', '_blank');
                                tempLink.style.display = 'none';
                                document.body.appendChild(tempLink);
                                tempLink.click();
                                setTimeout(() => {
                                    document.body.removeChild(tempLink);
                                }, 100);
                            }
                        };
                        
                        // Başarılı dönüşümde sayfayı sonuç alanına kaydır
                        result.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        
                        // Ayrıca manuel indirme seçeneği ekle
                        const manualDownloadInfo = document.createElement('div');
                        manualDownloadInfo.className = 'mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg';
                        manualDownloadInfo.innerHTML = `
                            <p>${'{{ config.CONVERTER_MANUAL_DOWNLOAD }}'.replace('buraya tıklayın', `<a href="${downloadUrl}" target="_blank" class="text-red-500 font-medium hover:underline">buraya tıklayın</a>`)}</p>
                        `;
                        
                        // Eğer daha önce eklenmiş bir manual download info varsa kaldır
                        const existingManualInfo = document.querySelector('.manual-download-info');
                        if (existingManualInfo) {
                            existingManualInfo.remove();
                        }
                        
                        manualDownloadInfo.classList.add('manual-download-info');
                        successResult.appendChild(manualDownloadInfo);
                        
                    } else {
                        successResult.classList.add('hidden');
                        errorResult.classList.remove('hidden');
                        errorMessage.textContent = data.error || 'Bilinmeyen bir hata oluştu.';
                    }
                })
                .catch(error => {
                    // Yükleniyor durumunu gizle
                    loadingSpinner.style.display = 'none';
                    buttonText.textContent = '{{ config.CONVERTER_BUTTON }}';
                    
                    // Hata mesajını göster
                    showError('Bir ağ hatası oluştu: ' + error.message);
                });
            });
            
            function showError(message) {
                result.classList.remove('hidden');
                successResult.classList.add('hidden');
                errorResult.classList.remove('hidden');
                errorMessage.textContent = message;
                
                // Hata mesajını görünür yap
                result.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        });
    </script>
</body>
</html> 